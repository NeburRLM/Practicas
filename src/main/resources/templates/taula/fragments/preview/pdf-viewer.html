<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ca">
<body>

<!-- VISOR DE PDF -->
<div th:fragment="pdfViewer" class="col-lg-8">
    <div class="ibox">
        <!-- Títol del visor -->
        <div th:replace="~{taula/fragments/preview/pdf-viewer :: viewerTitle}"></div>

        <!-- Contingut del visor -->
        <div th:replace="~{taula/fragments/preview/pdf-viewer :: viewerContent}"></div>
    </div>
</div>

<!-- Fragment: Títol del Visor -->
<div th:fragment="viewerTitle" class="ibox-title" style="position: relative;">
    <h5><i class="fa fa-file-text-o"></i> Previsualització PDF</h5>

    <!-- Botó d'errors HTML -->
    <button id="htmlErrorsBtn"
            class="btn btn-sm btn-warning mr-5"
            style="position: absolute; right: 15px; top: 50%; transform: translateY(-50%); display: none;">
        <i class="fa fa-warning"></i> Possibles errors HTML
    </button>
</div>

<!-- Fragment: Contingut del Visor -->
<div th:fragment="viewerContent" class="ibox-content p-0">
    <!-- Container amb dimensions -->
    <div th:if="${template.pageDimensions}"
         class="bg-light p-3"
         id="pdfViewerContainer"
         style="height: calc(100vh - 140px); min-height: 920px; overflow-y: auto; overflow-x: auto;">

        <!-- Pàgina inicial buida -->
        <div class="bg-white shadow-sm mx-auto mb-4 position-relative"
             style="width: 210mm; height: 297mm; border: 1px solid #e7eaec;">
            <div class="d-flex flex-column align-items-center justify-content-center h-100 text-muted">
                <i class="fa fa-file-text-o mb-3" style="font-size: 5rem; opacity: 0.3;"></i>
                <span>Genera una prova per veure la previsualització</span>
            </div>
        </div>
    </div>

    <!-- Alerta si no hi han dimensions -->
    <div class="alert alert-warning m-3" th:if="${template.pageDimensions == null}">
        <i class="fa fa-exclamation-triangle"></i>
        No s'han definit les dimensions de pàgina
    </div>
</div>

</body>
</html>