<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ca">
<body>

<!-- CONTINGUT DEL FORMULARI -->
<div th:fragment="attachmentFormContent" class="ibox-content">
    <!-- Camp ID ocult (només en mode edició) -->
    <input th:if="${isEdit != null and isEdit}"
           type="hidden"
           name="id"
           th:value="${attachment.id}">

    <!-- Camp Codi -->
    <div th:replace="~{taula/fragments/createAttachment/form :: codeField}"></div>

    <div class="hr-line-dashed"></div>

    <!-- Camp Nom -->
    <div th:replace="~{taula/fragments/createAttachment/form :: nameField}"></div>

    <div class="hr-line-dashed"></div>

    <!-- Camp Arxiu -->
    <div th:replace="~{taula/fragments/createAttachment/form :: fileField}"></div>
</div>

<!-- Fragment: Camp Codi -->
<div th:fragment="codeField" class="form-group row">
    <label class="col-lg-2 col-md-3 col-sm-4 col-12 col-form-label" for="codeInput">
        Codi:
    </label>
    <div class="col-lg-10 col-md-9 col-sm-8 col-12">
        <input type="text"
               class="form-control"
               id="codeInput"
               name="code"
               placeholder="Introdueix el codi..."
               th:value="${attachment != null ? attachment.code : ''}"
               required
               oninvalid="this.setCustomValidity('Cal introduir el codi de l\'adjunt.')"
               oninput="setCustomValidity('')">
    </div>
</div>

<!-- Fragment: Camp Nom -->
<div th:fragment="nameField" class="form-group row">
    <label class="col-lg-2 col-md-3 col-sm-4 col-12 col-form-label" for="nameInput">
        Nom adjunt:
    </label>
    <div class="col-lg-10 col-md-9 col-sm-8 col-12">
        <input type="text"
               class="form-control"
               id="nameInput"
               name="name"
               placeholder="Introdueix el nom..."
               th:value="${attachment != null ? attachment.name : ''}"
               required
               oninvalid="this.setCustomValidity('Cal introduir el nom de l\'adjunt.')"
               oninput="setCustomValidity('')">
    </div>
</div>

<!-- Fragment: Camp Arxiu -->
<div th:fragment="fileField" class="form-group row">
    <label class="col-lg-2 col-md-3 col-sm-4 col-12 col-form-label">
        Seleccionar fitxer:
    </label>
    <div class="col-lg-10 col-md-9 col-sm-8 col-12">
        <div class="custom-file">
            <input type="file"
                   class="custom-file-input"
                   id="fileInput"
                   name="file"
                   th:required="${isEdit == null or !isEdit}"
                   oninvalid="this.setCustomValidity('Cal seleccionar un arxiu.')"
                   oninput="setCustomValidity('')">
            <label class="custom-file-label" for="fileInput">
                <span th:text="${attachment != null and attachment.fileName != null} ? ${attachment.fileName} : 'Cap arxiu seleccionat'">
                    Cap arxiu seleccionat
                </span>
            </label>
        </div>
    </div>
</div>

</body>
</html>